---
---

<script>
  import lozad from "lozad";

  // setup post url
  const setupUrlAnchor = () => {
    const url = window.location.href;
    const urlElement = document.getElementById("post-url") as HTMLAnchorElement;
    if (urlElement) {
      urlElement.href = url;
      urlElement.innerText = url;
    }
  };

  // setup lazy load for images
  const setupLozad = () => {
    const observer = lozad(".lozad", {
      loaded: (el) => {
        el.classList.add("loaded");
      },
    });

    observer.observe();
  };

  // init
  const setup = () => {
    setupUrlAnchor();
    setupLozad();
    // setupScrollBar(); // supprimÃ© (OverlayScrollbars)
    document.body.classList.remove("overflow-y-hidden");
  };

  document.addEventListener("DOMContentLoaded", setup);
  if (window.swup?.hooks) {
    setup();
  } else {
    document.addEventListener("swup:enable", () => {
      window.swup.hooks.on("content:replace", setup);
    });
  }
</script>
