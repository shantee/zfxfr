---
// Component Imports
import Main from "../layouts/MainLayout.astro";
import ArchiveYearTitle from "../components/misc/ArchiveYearTitle.astro";
import ArchivePost from "../components/misc/ArchivePost.astro";

import { type Archive } from "../utils/content";

export interface Props {
  archiveMap: Map<number, Array<Archive>>;
  title?: string;
  subTitle?: string;
  bannerImage?: string;
  slug?: string;
  mainTitle?: string;
}

const { archiveMap, title, subTitle, bannerImage, slug, mainTitle } =
  Astro.props;
---

<Main title={title} subTitle={subTitle} bannerImage={bannerImage} slug={slug}>
  <div class="article-wrapper main-container">
    <h1
      class="mb-4 text-2xl font-extrabold text-gray-900 md:text-3xl lg:text-4xl dark:text-white"
    >
      <span
        class="bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent"
      >
        {mainTitle || title}
      </span>
    </h1>
    <br />
    <br />
    {
      archiveMap.size !== 0 &&
        [...archiveMap.keys()].map((year) => (
          <div>
            <ArchiveYearTitle
              year={year}
              count={archiveMap.get(year)!.length}
            />
            <ul>
              {archiveMap.get(year)?.map((entry) => (
                <li>
                  <ArchivePost
                    id={entry.id}
                    title={entry.title}
                    pubilished={entry.date}
                    tags={entry.tags}
                  />
                </li>
              ))}
            </ul>
          </div>
        ))
    }
  </div>
</Main>

<style>
  .archives {
    @apply mx-3 flex flex-col rounded-2xl bg-[var(--card-color)] px-10 py-5 lg:mx-0 lg:p-10;
  }
</style>
<style is:global>
  .main-container > .flex.flex-row.items-start > .space-y-8 {
    flex: 1 1 auto;
    min-width: 0;
  }
  .article-wrapper {
    @apply mx-3 rounded-2xl bg-[var(--card-color)] px-5 py-6 lg:mx-0 lg:px-10 lg:py-9;
  }
  .article {
    @apply flex flex-col;
    font-size: var(--primary-font);
  }
</style>
